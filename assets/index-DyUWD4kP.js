(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}})();function f(t){const i=t.file_extension??"png";for(const r in t.states){const n=t.states[r];n.images=[];for(let e=n.index_start;e<=n.index_end;e++){const s=new Image;s.src=`${t.base_src+r}/${n.base_file_name}${e}.${i}`,n.images.push(s)}n.index=0,typeof n.time>"u"&&(n.time=60)}return t}function _(t,i){const r=t.get_sprite_state(),n=t.sprites_data.scale,{image_width:e,image_height:s}=t.sprites_data;let{x:a,y:p}=t.position;a+=t.sprites_data.offset.x,p+=t.sprites_data.offset.y,i.drawImage(r.images[r.index],0,0,e,s,a,p,e*n,s*n)}function m(t,i){const r=t.get_sprite_state();i.previous<t.animation_timer+r.time||(t.animation_timer=i.previous,r.index++,r.index===r.images.length&&(r.index=0))}class l{constructor(i){this.sprites_data=f(i.sprites_data),this.width=this.sprites_data.width,this.height=this.sprites_data.height,this.id=i.id??i.sprites_data.id??"",this.state="idle",this.animation_timer=0,this.position=i.position??{x:0,y:0}}update(i){this.sprites_data&&m(this,i)}draw(i){this.sprites_data&&(_(this,i),i.strokeRect(this.position.x,this.position.y,this.width,this.height))}get_sprite_state(){return this.sprites_data.states[this.state]}}const g="spiderman",y="sprites/spiderman/",w=1,x={x:-280,y:-210},v=60,L=80,O=640,S=480,q={idle:{base_file_name:"MVC2_SpiderMan_",index_start:159,index_end:167}},P={id:g,base_src:y,scale:w,offset:x,width:v,height:L,image_width:O,image_height:S,states:q},c={previous:0,seconds_passed:0};let o,d,h;function $(){C(),A(),requestAnimationFrame(u)}window.addEventListener("load",$);function A(){h=new l({sprites_data:P,position:{x:100,y:100}})}function C(){o=document.querySelector("canvas"),o.width=1200,o.height=600,d=o.getContext("2d"),d.strokeStyle="green",d.imageSmoothingEnabled=!0,d.imageSmoothingQuality="high"}function u(t){c.seconds_passed=(t-c.previous)/1e3,c.previous=t,requestAnimationFrame(u),E(c),F(d)}function E(t){h.update(t)}function F(t){t.clearRect(0,0,o.width,o.height),h.draw(t)}
