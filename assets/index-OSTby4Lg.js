(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&n(d)}).observe(document,{childList:!0,subtree:!0});function s(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=s(i);fetch(i.href,o)}})();function l(t){const e=t.file_extension??"png";for(const s in t.states){const n=t.states[s];n.images=[];for(let i=n.index_start;i<=n.index_end;i++){const o=new Image;o.src=`${t.base_src+s}/${n.base_file_name}${i}.${e}`,n.images.push(o)}n.index=0,typeof n.time>"u"&&(n.time=60)}return t}function u(t,e){const s=t.get_sprite_state(),n=t.sprites_data.scale,{image_width:i,image_height:o}=t.sprites_data;let{x:d,y:p}=t.position;d+=t.sprites_data.offset.x,p+=t.sprites_data.offset.y,e.drawImage(s.images[s.index],0,0,i,o,d,p,i*n,o*n)}function _(t,e){const s=t.get_sprite_state();e.previous<t.animation_timer+s.time||(t.animation_timer=e.previous,s.index++,s.index===s.images.length&&(s.index=0))}class g{constructor(e){this.sprites_data=l(e.sprites_data),this.width=this.sprites_data.width,this.height=this.sprites_data.height,this.id=e.id??e.sprites_data.id??"",this.state="idle",this.animation_timer=0,this.position=e.position??{x:0,y:0},this.velocity={x:0,y:0}}update(e){_(this,e)}draw(e){u(this,e)}get_sprite_state(){return this.sprites_data.states[this.state]}}const m="spiderman",y="sprites/spiderman/",w=1,x={x:-280,y:-210},v=60,L=80,O=640,S=480,q={idle:{base_file_name:"MVC2_SpiderMan_",index_start:159,index_end:167}},P={id:m,base_src:y,scale:w,offset:x,width:v,height:L,image_width:O,image_height:S,states:q};function $(t,e){e.strokeRect(t.position.x,t.position.y,t.width,t.height)}const A=100;function C(t,e){const s=E(t);s.left<=0?t.velocity.x=1:s.right>=e.width&&(t.velocity.x=-1);let n=e.height-A;s.bottom>=n&&(t.position.y=n,t.velocity.y=0)}function E(t){return{top:t.position.y,right:t.position.x+t.width,bottom:t.position.y+t.height,left:t.position.x,width:t.width,height:t.height}}const F=8;function I(t,e){t.velocity.y+=F,t.position.y+=t.velocity.y*e.seconds_passed}const c={previous:0,seconds_passed:0};let a,h,r;function M(){R(),N(),requestAnimationFrame(f)}window.addEventListener("load",M);function N(){r=new g({sprites_data:P}),r.velocity.x=1}function R(){a=document.querySelector("canvas"),a.width=1200,a.height=600,h=a.getContext("2d"),h.strokeStyle="green",h.imageSmoothingEnabled=!0,h.imageSmoothingQuality="high"}function f(t){c.seconds_passed=(t-c.previous)/1e3,c.previous=t,requestAnimationFrame(f),K(c),Q(h)}function K(t){r.update(t),r.position.x+=r.velocity.x,C(r,a),I(r,t)}function Q(t){t.clearRect(0,0,a.width,a.height),r.draw(t),$(r,t)}
